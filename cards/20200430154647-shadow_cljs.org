#+TITLE: shadow-cljs
#+OPTIONS: toc:nil
#+ROAM_ALIAS: cljs build-tool
#+ROAM_TAGS: cljs js webapp tool front-end nginx clj-toolkit

* shadow-cljs

** NGINX Configuration for developping locally

#+BEGIN_SRC conf
  server {
    listen 80 default_server;
    listen [::]:80 default_server;

    root /var/www/html;
    server_name _;

    location / {
      proxy_pass http://localhost:8080/;
      try_files $uri $uri/a 404;
    }

    location /shadow-cljs/ {
      # upgrade to websocket
      proxy_pass http://localhost:9630/;
      proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection "Upgrade";
      proxy_set_header Host $host;
    }

  }
#+END_SRC

** Inspect

Inject the correct namespaces with ~:devtools~ preloads in the
=shadow-cljs.edn= config file.

#+begin_src clojure
  {:devtools
   {:preloads [shadow.remote.runtime.cljs.browser
               ;; shadow.remote.runtime.cljs.node ;; for nodejs
               ]}}
#+end_src

Inspect with Clojure and not only ClojureScript

#+begin_src clojure
  (require '[shadow.cljs.devtools.server :as server])
  (server/start!)
  (tap> :hello)
#+end_src

*** Sources
    https://clojureverse.org/t/introducing-shadow-cljs-inspect/5012

** Links

- [[https://shadow-cljs.github.io/docs/UsersGuide.html][shadow-cljs]]
- [[https://clojurescript.org/][cljs]]

** See also (generated)

- [[file:../decks/clojure.org][Clojure]]
- [[file:20200505124946-clj_toolkit.org][Clojure toolkit]]
- [[file:20200430141609-david_nolen.org][David Nolen]]
- [[file:20200505113402-high_performance_clojurescript.org][High Performance CLJS]]
- [[file:20200430141226-life_in_dynamic_typing.org][Life In Dynamic Typing]]
- [[file:20200505112918-nginx.org][nginx]]
